spec:
  inputs:
    job-name:
      type: string
    job-needs:
      type: array
      default: []
    job-stage:
      type: string
      default: tool
    image-name:
      type: string

---

$[[ inputs.job-name ]]:
  needs: $[[ inputs.job-needs ]]
  stage: $[[ inputs.job-stage ]]
  image:
    name: quay.io/podman/stable:latest
    docker:
      user: podman
  script:
    - ./.gitlab/build-image.sh $[[ inputs.image-name ]]
